<!DOCTYPE html>
 <html><head><link rel="shortcut icon" href="https://klxd.github.io/note-site/favicon.ico"/><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/note-site/component---src-layouts-index-js-3daf09335c5f504736c4.js" as="script"/><link rel="preload" href="/note-site/component---src-templates-blog-post-js-abd6f421d346b63add1d.js" as="script"/><link rel="preload" href="/note-site/path---blog-with-gatsby-3954b78480589f574af5.js" as="script"/><link rel="preload" href="/note-site/app-b4c19631bc24e0aa4f15.js" as="script"/><link rel="preload" href="/note-site/commons-f0ec8ca84bddf71c806c.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"15178676390636814000":"app-b4c19631bc24e0aa4f15.js","6502461027731969000":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","7065993314207131000":"component---src-templates-blog-post-js-abd6f421d346b63add1d.js","8920819121031977000":"component---src-templates-tag-route-js-5448f45d6781dec0165a.js","3839412732901535000":"component---src-components-game-2048-js-d9acf50e59e9be0e63e8.js","2345137460201621000":"component---src-pages-index-js-7b6a591a41bba1fca936.js","12835270051674753000":"component---src-pages-tags-js-b120b43d67ae240332d2.js","3954140758598355500":"path----557518bd178906f8d58a.js","13784418321228782000":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","17495583139258513000":"path---about-this-site-d3bcd5a34898fd042dd4.js","8144719420280132000":"path---hi-folks-2bbdae6460bb2411ecf4.js","635518864555896600":"path---java-classloader-9368e46a7f1ff7063c11.js","16026867243005362000":"path---code-highlight-eff3f6012961317aa3e9.js","6651855161709604000":"path---encoding-2894019b5d3860e751f8.js","16145541147963748000":"path---markdown-learning-1c8306eda108ce9394ff.js","2844489743973785600":"path---java-collection-framework-bef2b17a9c8a3c30081c.js","5979705947894877000":"path---java-array-list-fc2571b3b69c7c33c79b.js","17443855456295041000":"path---java-linked-list-07be25fa1ef41fe12b47.js","14935930947158213000":"path---java-array-deque-d27d5a4bd5401ab64499.js","13284927628698448000":"path---sql-table-join-d6abd3c8b56582d67ab7.js","6225238164750303000":"path---java-linked-hash-map-be7c67971806ef4a058f.js","4400958211773590500":"path---java-hash-table-1ee256ed8d5a909a54e1.js","5276986228162747000":"path---java-tree-map-dbaa337d2c24520269eb.js","4982180573294444000":"path---java-priority-queue-ca1a42323becdfa2f5fa.js","16513549679550345000":"path---java-concurrent-hash-map-386c320922f2eea795c9.js","11402648288945498000":"path---java-memory-model-5459357e5ea3090ea347.js","12590616335811600000":"path---java-copy-on-write-array-list-6eaddab345c34b329b5e.js","14194555530695092000":"path---java-serialization-7029b8109abf04260927.js","11283977664076340000":"path---java-lock-7179fdccb1dc7d06fc36.js","14317612983713708000":"path---java-thread-fc5762923a8fb74dec1c.js","16820207139262534000":"path---java-thread-pool-a132b0dcc42557398fd7.js","10420783750355646000":"path---java-thread-local-7f481334cbd179ec5b2b.js","8034362812816101000":"path---java-runtime-memory-1036eb202c89d7871d66.js","8483082805523461000":"path---cassandra-adc841b17c88375b8ae8.js","3002031349668452000":"path---kafka-66cafb36e111a7a8d111.js","267997699225971620":"path---java-static-vs-transient-6a510cfbd002a59f6d92.js","8372970106469668000":"path---back-to-top-button-e8458cb29761c63d196a.js","18126458759721290000":"path---leetcode-6a73780a68e24c19e70c.js","4249768654350922000":"path---new-in-java-9-023b7afaeb876da45cb3.js","10660064599783924000":"path---blog-with-gatsby-3954b78480589f574af5.js","13166383532613306000":"path---micro-service-7c6489518b2309405da1.js","13023780024802353000":"path---tags-web-f1126dea6d0e9138e0a3.js","10868464433361236000":"path---tags-mock-f77acc6922d721f67463.js","10182997739304628000":"path---tags-java-761a52951f9203d7bfc1.js","10550298781227196000":"path---tags-jvm-d9bbf950cf2265c49159.js","3028396222034269000":"path---tags-remark-ed368dbc68a206c4f5a2.js","2998820046695644700":"path---tags-markdown-6b705bf73ae8b2a22d7c.js","8653037115290970000":"path---tags-prism-js-94c57e5f7041a4fed8da.js","9400156046315106000":"path---tags-encoding-d73e34868f8c928077f9.js","12678663474199468000":"path---tags-java-collection-framework-0fe3ea47195045a1b57e.js","13426925261089182000":"path---tags-sql-684d69e0fdc898300cf4.js","12517393503123409000":"path---tags-serialization-f9aab32f272c087bc0e8.js","9580800669513587000":"path---tags-middleware-945bc5390e10f8328c6d.js","3327384682858550300":"path---tags-database-f137bbf5200a8f6dcc48.js","468946312812313200":"path---tags-kafka-c8f9eac2ad46b795e7d5.js","4412887831933620700":"path---tags-javascript-d00b6889ffd7695adb33.js","10049340530526904000":"path---tags-leetcode-48303bd7d05a60dd1c60.js","8922948252576328000":"path---tags-architecture-6033bfd52c307baa3ab1.js","13685109203999515000":"path---games-2048-a0e39f21c11f6a62c5ab.js","9347362237655822000":"path---index-5cb37bc75dc0654fe1d6.js","3650512264882278400":"path---tags-deadb89395e61e4fda44.js","7489246917808536000":"component---src-layouts-index-js-3daf09335c5f504736c4.js"}
            //]]>
            </script><title data-react-helmet="true">使用Gatsby构建静态博客网站 | Note Site</title><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/note-site/commons-f0ec8ca84bddf71c806c.js","/note-site/app-b4c19631bc24e0aa4f15.js","/note-site/path---blog-with-gatsby-3954b78480589f574af5.js","/note-site/component---src-templates-blog-post-js-abd6f421d346b63add1d.js","/note-site/component---src-layouts-index-js-3daf09335c5f504736c4.js"
])
  </script><style id="gatsby-inlined-css">.tag-component{display:inline-block;transition:all .4s;border:1px solid #ccc;border-radius:1020px;padding:3px 10px;margin-bottom:5px;margin-right:4px;font-size:12px;line-height:1.5;color:#5a5a5a;text-decoration:none;white-space:nowrap}.tag-component:hover{color:#333;background-color:#e6e6e6;border-color:#adadad}.tag-component .tag-name{color:#5a5a5a}.tag-component .tag-count{background:#259;opacity:.85;top:0;padding:1px 5px;color:#fff;font-size:10px;display:inline-block;font-weight:700;line-height:1;text-align:center;white-space:nowrap;border-radius:10px;margin-left:4px}.blog-post-template{background-color:#fff;padding:16px;width:1000px}.blog-post-template .header-line{display:flex;justify-content:space-between}.blog-post-template .header-line .header-text{color:#333;font-size:2em;font-weight:700;line-height:35px}.blog-post-template .header-line .header-date{font-size:.9em}.blog-post-template .post-tags{padding-top:10px;padding-bottom:20px}.tag-route-template{background-color:#fff;padding:16px;width:1000px}.tag-route-template .tag-header-panel{padding-bottom:10px;border-bottom:1px solid #ccc}.tag-route-template .tag-content-list{padding-top:10px}.button-component{display:inline-block;background:#0f88eb;color:#fff;border:1px solid #0f88eb;font-size:14px;padding:0 14px;text-align:center;cursor:pointer;border-radius:3px;outline:none}.game-2048{background-color:#fff;padding:16px;width:1000px;display:flex;flex-direction:column;align-items:center}.game-2048 .header-container{display:flex;justify-content:space-between;width:400px}.game-2048 .header-container .header-text{color:#776e65;font-weight:700;font-size:74px;line-height:66px}.game-2048 .header-container .button-container{display:flex;justify-content:space-between}.game-2048 .grid-container{display:flex;flex-flow:column}.game-2048 .grid-cell,.game-2048 .grid-row{display:flex;justify-content:center}.game-2048 .grid-cell{align-items:center;height:100px;width:100px;background:bisque;border-radius:15px;font-size:53px;line-height:98px;color:#776e65;font-family:Clear Sans,Helvetica Neue,Arial,sans-serif}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/note-site/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/note-site/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/note-site/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/note-site/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/note-site/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/note-site/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/note-site/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/note-site/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/note-site/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/note-site/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/note-site/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/note-site/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/note-site/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/note-site/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/note-site/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/note-site/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/note-site/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/note-site/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/note-site/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/note-site/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/note-site/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/note-site/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/note-site/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/note-site/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/note-site/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/note-site/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/note-site/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/note-site/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/note-site/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/note-site/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/note-site/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/note-site/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/note-site/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/note-site/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/note-site/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/note-site/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/note-site/static/merriweather-latin-300.a8258cd1.woff2) format("woff2"),url(/note-site/static/merriweather-latin-300.f5838312.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/note-site/static/merriweather-latin-300italic.ff744a72.woff2) format("woff2"),url(/note-site/static/merriweather-latin-300italic.ebb3c5bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/note-site/static/merriweather-latin-400.41389797.woff2) format("woff2"),url(/note-site/static/merriweather-latin-400.fc0d5525.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/note-site/static/merriweather-latin-400italic.e6bb2aaf.woff2) format("woff2"),url(/note-site/static/merriweather-latin-400italic.8df98251.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/note-site/static/merriweather-latin-700.7c4720f5.woff2) format("woff2"),url(/note-site/static/merriweather-latin-700.8081d883.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/note-site/static/merriweather-latin-700italic.af53e7c6.woff2) format("woff2"),url(/note-site/static/merriweather-latin-700italic.c9addd1f.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/note-site/static/merriweather-latin-900.b64d6d00.woff2) format("woff2"),url(/note-site/static/merriweather-latin-900.3ca953c0.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/note-site/static/merriweather-latin-900italic.566e2de4.woff2) format("woff2"),url(/note-site/static/merriweather-latin-900italic.5156ebd3.woff) format("woff")}.card-component .dot{display:block;color:#fff;background:red;position:absolute;font-size:10px;border-radius:1020px;box-shadow:0 15px 30px 0 rgba(0,0,0,.15);padding:1px 6px 2px;z-index:50;right:5px;top:5px}.main-page .main-container{display:flex;align-items:flex-start;justify-content:center}.main-page .main-container .main-content{margin-right:10px;width:700px}.main-page .main-container .right-side-bar{padding:10px 0 10px 10px;width:290px;line-height:2;background:#fff;border-radius:2px;box-shadow:0 1px 3px rgba(0,0,0,.1)}.main-page .post-item{padding:16px 20px;background:#fff;border-radius:2px;margin-bottom:10px}.main-page .post-header-row{display:flex;justify-content:space-between}.main-page .post-header{font-weight:700;padding-bottom:4px}.main-page .post-date{font-size:80%}.main-page .post-excerpt{margin-bottom:0}.tags-page{background-color:#fff;padding:16px;width:1000px}.shelter-component{z-index:100;position:fixed;min-width:1032px;width:100%;left:0;top:0;background:#fff;overflow:hidden;box-shadow:0 1px 3px 0 rgba(0,34,77,.1)}.shelter-component .shelter-inner{display:flex;align-items:center;width:1000px;padding:0 16px;height:52px;margin:0 auto}.shelter-component .header-text{text-decoration:none;font-size:20px;font-weight:700}.shelter-component .navigation{display:flex;width:160px;justify-content:space-between;margin-left:27px}.shelter-component .navigation a{text-decoration:none;font-size:16px;color:#999}.shelter-component .navigation :hover{color:#259}.shelter-component .user-info{flex:1;display:flex;justify-content:flex-end}.corner-container{position:fixed;bottom:12px;right:12px}.corner-container .corner-button{background:#fff;border-radius:4px;width:40px;height:40px;border:none;color:#8590a6;cursor:pointer;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1)}.corner-container .corner-button:hover{background:#d5dbe7}.corner-container .corner-button:focus{outline:none}code[class*=language-],pre[class*=language-]{float:left;color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.important,.token.regex{color:#d88489}.language-css .token.string,.style .token.string{color:#a2466c}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}blockquote{margin:1.6rem 1.6rem 1.6rem 0;padding:0 0 0 .8rem;border-left:.4rem solid rgba(46,46,46,.1);color:rgba(46,46,46,.8);font-style:italic}.gatsby-highlight{background:#272822;border-radius:.15rem;margin-top:0;margin-bottom:1.2rem;padding:1.2rem;overflow:auto}.gatsby-highlight-code-line{background:hsla(24,20%,50%,.08);display:block;margin-left:-1.2rem;margin-right:-1.2rem;padding-right:1.2rem;padding-left:.9rem;border-left:.3rem solid #3f87a6}.gatsby-highlight::-webkit-scrollbar{width:.8rem;height:.8rem;background-color:#f5f5f5}.gatsby-highlight::-webkit-scrollbar-track{background-color:#f5f5f5}.gatsby-highlight::-webkit-scrollbar-thumb{border-radius:0 0 .25rem .25rem;background-color:#555}a{color:#259}body{font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif;text-rendering:optimizeLegibility;background:#f3f3f3}.common-container{display:flex;justify-content:center;overflow:hidden;margin-top:62px;min-width:1000px;margin-left:16px;margin-right:16px}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="1480895354"><div class="shelter-component" data-reactid="2"><div class="shelter-inner" data-reactid="3"><a class="header-text" href="/note-site/" data-reactid="4">Note Site</a><div class="navigation" data-reactid="5"><a href="/note-site/" data-reactid="6">首页</a><a href="/note-site/tags" data-reactid="7">标签</a><a href="/note-site/games/2048" data-reactid="8">游戏</a></div><div class="user-info" data-reactid="9"><a href="https://github.com/klxd/note-site" data-reactid="10"><svg fill="currentColor" viewBox="0 0 40 40" width="24" height="24" data-reactid="11"><path d="m20 0c-11 0-20 9-20 20 0 8.8 5.7 16.3 13.7 19 1 0.2 1.3-0.5 1.3-1 0-0.5 0-2 0-3.7-5.5 1.2-6.7-2.4-6.7-2.4-0.9-2.3-2.2-2.9-2.2-2.9-1.9-1.2 0.1-1.2 0.1-1.2 2 0.1 3.1 2.1 3.1 2.1 1.7 3 4.6 2.1 5.8 1.6 0.2-1.3 0.7-2.2 1.3-2.7-4.5-0.5-9.2-2.2-9.2-9.8 0-2.2 0.8-4 2.1-5.4-0.2-0.5-0.9-2.6 0.2-5.3 0 0 1.7-0.5 5.5 2 1.6-0.4 3.3-0.6 5-0.6 1.7 0 3.4 0.2 5 0.7 3.8-2.6 5.5-2.1 5.5-2.1 1.1 2.8 0.4 4.8 0.2 5.3 1.3 1.4 2.1 3.2 2.1 5.4 0 7.6-4.7 9.3-9.2 9.8 0.7 0.6 1.4 1.9 1.4 3.7 0 2.7 0 4.9 0 5.5 0 0.6 0.3 1.2 1.3 1 8-2.7 13.7-10.2 13.7-19 0-11-9-20-20-20z" data-reactid="12"></path></svg></a></div></div></div><div class="common-container" data-reactid="13"><div class="blog-post-template" data-reactid="14"><!-- react-empty: 15 --><div class="header-line" data-reactid="16"><div class="header-text" data-reactid="17">使用Gatsby构建静态博客网站</div><div class="header-date" data-reactid="18">September 03, 2017</div></div><div class="post-tags" data-reactid="19"><a class="tag-component" href="/note-site/tags/web/" data-reactid="20"><span class="tag-name" data-reactid="21">web</span><!-- react-text: 22 --><!-- /react-text --></a></div><div data-reactid="23"><h3>为什么使用Gatsby</h3>
<p>刚开始想要在<strong><a href="https://pages.github.com/">GitHub Pages</a></strong>上搭建一个博客网站的时候,
我的需要的只是一个可以帮我将普通文本文件转化为HTML的框架,比如已经和GitHub Pages深度集成的
<strong><a href="https://jekyllrb.com/">Jekyll</a></strong>,但是带着探索新技术的心,我还是选择了更加新潮的
<a href="https://www.gatsbyjs.org/">Gatsby</a>.</p>
<blockquote>
<p>Gatsby is a blazing-fast static site generator for React.</p>
</blockquote>
<p>从GitHub上简洁的介绍可以看到,这是一个用于快速构建静态网站的框架,并且是使用使用的是<a href="https://reactjs.org/">React.js</a>.
由于工作中使用过React,当我看到连React的官网都是用Gatsby搭建的时候,我决心尝试一下这个框架.</p>
<h3>安装Gatsby</h3>
<p>跟着官方文档<a href="https://www.gatsbyjs.org/docs/">https://www.gatsbyjs.org/docs/</a>,可以很容易地搭建出Gatsby的开发环境,
如果之前使用过Node.js,应该可以很容易的上手.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --global gatsby-cli
gatsby new gatsby-site
<span class="token function">cd</span> gatsby-site
gatsby develop
</code></pre>
      </div>
<p>Gatsby提供了几个默认的starter用于从模板中快速搭建一个网站,虽然starter都比较简单,但是对理解
Gatsby的使用方法有很大帮助.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>gatsby new <span class="token punctuation">[</span>SITE_DIRECTORY<span class="token punctuation">]</span> <span class="token punctuation">[</span>URL_OF_STARTER_GITHUB_REPO<span class="token punctuation">]</span>
gatsby new blog https://github.com/gatsbyjs/gatsby-starter-blog
</code></pre>
      </div>
<hr>
<h3>Gatsby的项目结构</h3>
<p>Gatsby的基本目录结构如下:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>├── gatsby-config.js
├── package.json
└── src
    ├── html.jsx
    ├── pages
    │   ├── index.jsx
    │   └── posts
    │       ├── 01-01-2017
    │       │   └── index.md
    │       ├── 01-02-2017
    │       │   └── index.md
    │       └── 01-03-2017
    │           └── index.md
    ├── templates
    │   └── post.jsx
    │
    └── layouts
        └── index.jsx</code></pre>
      </div>
<p><strong>pages目录</strong><br>
在这个目录下的React Component会自动转化为静态页面,URL路径由文件名决定,如<code>src/pages/index.js</code>
会转化为<code>domain/</code>,而<code>src/pages/about.js</code>会转化为<code>domain/about/</code>.</p>
<p><strong>templates目录</strong><br>
pages目录可以直接构造新页面,而当有许多类似的页面时,直接在pages页面创建会需要做许多重复的工作,
这时可以在templates目录下创建一个模板用于包装,然后使用GraphQL将所需要的数据放入这个模板,从而
自动生成多个类似的页面.</p>
<p><strong>Layouts目录</strong><br>
这个目录下包含了一个React Component(非必须的),它是网站中所有页面的公共容器,可以在这里定义网站
的导航条和脚注.</p>
<p><strong>html.js文件</strong><br>
这个文件定义了整个网站最基本的HTML结构,可以在这个文件里面自定义<code>&#x3C;head></code>中的内容.</p>
<hr>
<h3>Gatsby插件</h3>
<p>Gatsby支持了许许多多的<a href="https://www.gatsbyjs.org/docs/plugins/">插件</a>,我想这才是
许多人选择Gatsby的原因.在网站中加入新的插件支持需要以下两个步骤(以<code>gatsby-transformer-json</code>为例):</p>
<ol>
<li>从npm安装 <code>npm install --save gatsby-transformer-json</code></li>
<li>在gatsby-config.js中配置</li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token string">`gatsby-transformer-json`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<hr>
<h3>在Gatsby中使用Markdown</h3>
<p>说到构建博客网站,一个重要的点就是要将<strong>网站页面逻辑</strong>和<strong>博客文本内容</strong>分离,这样在写博客时
不用关心页面的具体渲染逻辑,我想没有人想在写文章的时候还要想着怎么去调整页面的CSS吧.
Markdown是一种轻量级的文本标记语言,它的特点是可以通过简单的标记语法让文本内容具有一定的格式.
在Gatsby中使用Markdown生成页面需要一下几个步骤:</p>
<h5>1.从文件系统从读取Markdown文件</h5>
<p>这是通过<code>gatsby-source-filesystem</code>插件完成的  </p>
<ol>
<li>安装<code>npm i --save gatsby-source-filesystem</code></li>
<li>配置<code>gatsby-config.js</code></li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code>plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    resolve<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`gatsby-source-filesystem`</span></span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/path/to/markdown/files`</span></span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">"markdown-pages"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h5>2. 转换Markdown文件</h5>
<p>这是通过<code>gatsby-transformer-remark</code>插件完成的,这个插件会读取Markdown文件,
将其中元数据部分(metadata)转化为<code>frontmatter</code>,将内容部分转化为HTML.  </p>
<ol>
<li>安装<code>npm i --save gatsby-transformer-remark</code></li>
<li>配置<code>gatsby-config.js</code></li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code>plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token template-string"><span class="token string">`gatsby-transformer-remark`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h5>3. 为Markdown数据创建模板组件</h5>
<p>在<code>src/templates/</code>目录下为转换后的Markdown数据创建模板文件,定义生成的html页面的
具体内容和样式.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Template</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// this prop will be injected by the GraphQL query below.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> markdownRemark <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// data.markdownRemark holds our post data</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> frontMatter<span class="token punctuation">,</span> html <span class="token punctuation">}</span> <span class="token operator">=</span> markdownRemark<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"blog-post-container"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"blog-post"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token operator">&lt;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>
        <span class="token operator">&lt;</span>div
          className<span class="token operator">=</span><span class="token string">"blog-post-content"</span>
          dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token punctuation">:</span> html <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token string">`
  query BlogPostByPath($path: String!) {
    markdownRemark(frontmatter: { path: { eq: $path } }) {
      html
      frontmatter {
        date(formatString: "MMMM DD, YYYY")
        path
        title
      }
    }
  }
`</span></span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>需要注意的点:</p>
<ol>
<li>pageQuery用于获取Markdown数据,Gatsby会自动地运行这个语句并返回其查询结果</li>
<li>查询结果会被注入到Template组件中,可以在React组件的render函数中使用</li>
</ol>
<h5>4. 利用Gatsby提供的Node API创建页面</h5>
<p>Gatsby提供了强大的<a href="https://www.gatsbyjs.org/docs/node-apis/">Node.js API</a>,
它们可以在<code>gatsby-node.js</code>文件中使用.下面将会示范如何使用<code>createPages</code>API来创建页面.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>createPages <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> boundActionCreators<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> createPage <span class="token punctuation">}</span> <span class="token operator">=</span> boundActionCreators<span class="token punctuation">;</span>

  <span class="token keyword">const</span> blogPostTemplate <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`src/templates/blogTemplate.js`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token function">graphql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`{
    allMarkdownRemark(
      sort: { order: DESC, fields: [frontmatter___date] }
      limit: 1000
    ) {
      edges {
        node {
          excerpt(pruneLength: 250)
          html
          id
          frontmatter {
            date
            path
            title
          }
        }
      }
    }
  }`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>allMarkdownRemark<span class="token punctuation">.</span>edges
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> node <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            path<span class="token punctuation">:</span> node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
            component<span class="token punctuation">:</span> blogPostTemplate<span class="token punctuation">,</span>
            context<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// additional data can be passed via context</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<ul>
<li>Gatsby会自动调用<code>gatsby-config.js</code>文件export的每个函数</li>
<li>Gatsby在调用函数时会自动注入参数,如<code>boundActionCreators</code>和<code>graphql</code></li>
<li>createPages函数中,先通过graphql获取元数据,然后在回调函数中使用<code>createPage</code>创建页面</li>
</ul></div><hr style="margin-bottom:1.45rem;" data-reactid="24"/></div></div><div class="corner-container" style="display:none;" data-reactid="25"><button class="corner-button" type="button" data-reactid="26"><svg fill="currentColor" viewBox="0 0 24 24" width="24" height="24" data-reactid="27"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z" data-reactid="28"></path></svg></button></div></div></div><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'undefined', 'auto');
  ga('send', 'pageview');
      </script></body></html>