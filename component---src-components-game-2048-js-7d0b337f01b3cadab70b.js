webpackJsonp([0x35485589dab52e00],{"./src/components/Button.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=r("./node_modules/react/react.js"),i=n(l),u=r("./node_modules/prop-types/index.js"),c=n(u);r("./src/less/component/button.less");var d=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){return i.default.createElement("button",{className:"button-component "+(this.props.disabled?"disabled":""),onClick:this.props.onClick,disabled:this.props.disabled},this.props.label)},t}(i.default.Component);t.default=d,d.propTypes={label:c.default.string,onClick:c.default.func,disabled:c.default.bool},e.exports=t.default},'./node_modules/babel-loader/lib/index.js?{"presets":["/home/peng/develop/workspace/stone-site/node_modules/babel-preset-react/lib/index.js","/home/peng/develop/workspace/stone-site/node_modules/babel-preset-es2015/lib/index.js","/home/peng/develop/workspace/stone-site/node_modules/babel-preset-stage-1/lib/index.js",["/home/peng/develop/workspace/stone-site/node_modules/babel-preset-env/lib/index.js",{"loose":true,"uglify":true,"modules":"commonjs","targets":{"browsers":["> 1%","last 2 versions","IE >= 9"]},"exclude":["transform-regenerator","transform-es2015-typeof-symbol"]}],"/home/peng/develop/workspace/stone-site/node_modules/babel-preset-stage-0/lib/index.js","/home/peng/develop/workspace/stone-site/node_modules/babel-preset-react/lib/index.js"],"plugins":["/home/peng/develop/workspace/stone-site/node_modules/gatsby/dist/utils/babel-plugin-extract-graphql.js","/home/peng/develop/workspace/stone-site/node_modules/babel-plugin-add-module-exports/lib/index.js","/home/peng/develop/workspace/stone-site/node_modules/babel-plugin-add-module-exports/lib/index.js","/home/peng/develop/workspace/stone-site/node_modules/babel-plugin-transform-object-assign/lib/index.js"],"cacheDirectory":true}!./src/components/Game2048.js':function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=r("./node_modules/react/react.js"),i=n(l),u=r("./src/components/Button.js"),c=n(u);r("./src/less/component/Game2048.less");var d=function(e){function t(){o(this,t);var r=a(this,e.call(this));return r.onTouchEnd=function(e){r.touchEndX=e.changedTouches[0].pageX,r.touchEndY=e.changedTouches[0].pageY;var n=r.touchEndX-r.touchStartX,o=r.touchEndY-r.touchStartY,a=void 0;a=Math.abs(n)>Math.abs(o)?n>0?t.RIGHT:t.LEFT:o>0?t.DOWN:t.UP,r.onMove(a)},r.onKeyDown=function(e){var n=void 0;switch(e.code){case"ArrowLeft":n=t.LEFT;break;case"ArrowRight":n=t.RIGHT;break;case"ArrowUp":n=t.UP;break;case"ArrowDown":n=t.DOWN;break;default:return}r.onMove(n)},r.onMove=function(e){var n=void 0,o=t.copyArray(r.arr),a=t.tryMovePanel(o,e);if(n=a[0],o=a[1],n){var s=t.setNewNum(o),l=t.isGameOver(o);r.preArr=r.arr,r.arr=o,r.setState({arr:r.arr,isGameOver:l,newCellPosition:s})}},r.onRestart=function(){r.init(),r.setState({arr:r.arr,isGameOver:!1})},r.onRevert=function(){r.arr=r.preArr,r.preArr=null,r.setState({arr:r.arr,isGameOver:!1})},r.init=function(){r.preArr=null,r.arr=[];for(var e=0;e<4;e++)r.arr.push([0,0,0,0]);t.setNewNum(r.arr),t.setNewNum(r.arr)},r.init(),r.state={arr:r.arr},r}return s(t,e),t.prototype.componentWillMount=function(){"undefined"!=typeof document&&(document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("touchstart",function(e){this.touchStartX=e.changedTouches[0].pageX,this.touchStartY=e.changedTouches[0].pageY}.bind(this)),document.addEventListener("touchend",this.onTouchEnd))},t.randomEmptyCell=function(e){for(var t=[],r=0;r<4;r++)for(var n=0;n<4;n++)0===e[r][n]&&t.push(4*r+n);return 0===t.length?-1:t[Math.floor(Math.random()*t.length)]},t.generateNewCellNumber=function(){return Math.random()>.1?2:4},t.isGameOver=function(e){for(var r=1;r<=4;r++){var n=t.tryMovePanel(e,r),o=n[0];if(o)return!1}return!0},t.prototype.render=function(){var e=this;return i.default.createElement("div",{className:"game-2048"},i.default.createElement("div",{className:"header-container"},i.default.createElement("div",{className:"header-text"},"2048"),i.default.createElement("div",{className:"button-container"},i.default.createElement(c.default,{onClick:this.onRestart,label:"New Game"}),i.default.createElement(c.default,{onClick:this.onRevert,label:"Revert",disabled:null===this.preArr}))),i.default.createElement("div",{className:"grid-container"},this.state.isGameOver?i.default.createElement("div",{className:"game-over-message"},"Game Over!"):null,this.state.arr.map(function(t,r){return i.default.createElement("div",{key:r,className:"grid-row"},t.map(function(t,n){var o=4*r+n===e.state.newCellPosition?"tile-new ":"",a="tile-"+(t>2048?"super":t);return i.default.createElement("div",{key:n,className:"grid-cell "+o+a},0===t?"":t)}))})))},t}(l.Component);d.LEFT=1,d.RIGHT=2,d.UP=3,d.DOWN=4,d.setNewNum=function(e){var t=d.randomEmptyCell(e);return t>=0&&(e[Math.floor(t/4)][t%4]=d.generateNewCellNumber()),t},d.copyArray=function(e){for(var t=[],r=0;r<e.length;r++){for(var n=[],o=0;o<e[r].length;o++)n.push(e[r][o]);t.push(n)}return t},d.tryMovePanel=function(e,t){var r=0,n=!1;switch(t){case d.LEFT:break;case d.RIGHT:r=180;break;case d.UP:r=90;break;case d.DOWN:r=270;break;default:return[n]}var o=d.rotate(e,r),a=d.merge(o);return n=a[0],o=a[1],o=d.rotate(o,360-r),[n,o]},d.merge=function(e){for(var t=!1,r=0;r<4;r++){for(var n=[],o=0;o<4;o++)0!==e[r][o]&&(n.push(e[r][o]),o>0&&0===e[r][o-1]&&(t=!0));for(var a=0;a<n.length-1;a++)n[a]===n[a+1]&&(n[a]*=2,n.splice(a+1,1),t=!0);for(;n.length<4;)n.push(0);e[r]=n}return[t,e]},d.rotate=function(e,t){for(var r=d.copyArray(e),n=0;n<t%360/90;n++)r=d.rotate90(r);return r},d.rotate90=function(e){for(var t=[],r=3;r>=0;r--){for(var n=[],o=0;o<4;o++)n.push(e[o][r]);t.push(n)}return t},t.default=d,e.exports=t.default},"./src/less/component/Game2048.less":function(e,t){},"./src/less/component/button.less":function(e,t){}});
//# sourceMappingURL=component---src-components-game-2048-js-7d0b337f01b3cadab70b.js.map